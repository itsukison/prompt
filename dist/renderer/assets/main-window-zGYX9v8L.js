import{r as i,j as e,c as te,u as D,B as E,a as U,d as _e,b as B,e as ue,f as Ie,g as ot,R as ct,P as lt}from"./styles-DuWstJ1F.js";const X=i.forwardRef(({className:t,type:s,...n},r)=>e.jsx("input",{type:s,className:te("flex h-9 w-full rounded-md border border-zinc-800 bg-transparent px-3 py-1.5 text-sm text-zinc-200 transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-zinc-600 focus:outline-none focus:border-zinc-600 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));X.displayName="Input";function dt({onNavigate:t}){const s=D(),[n,r]=i.useState(!1),[o,a]=i.useState(""),[l,c]=i.useState(""),[d,m]=i.useState(""),[x,p]=i.useState(!1),f=n?"Create account":"Welcome back",u=n?"Start your journey with a free account.":"Enter your credentials to access your workspace.",j=n?"Create Account":"Continue",h=n?"Already have an account? Sign in":"No account? Sign up",g=i.useCallback(()=>{r(N=>!N),m("")},[]),y=i.useCallback(async N=>{N.preventDefault(),m(""),p(!0);const w={email:o.trim(),password:l};try{const z=n?await s.auth.signUp(w):await s.auth.signIn(w);if(!z.success){m(z.error),p(!1);return}n||z.needsOnboarding?t("onboarding-1"):t("settings")}catch{m("An unexpected error occurred"),p(!1)}},[n,o,l,s,t]);return e.jsx("div",{className:"page active flex-col items-center justify-center min-h-screen px-4 animate-fade-in w-full",children:e.jsxs("div",{className:"w-full max-w-[360px]",children:[e.jsxs("div",{className:"flex flex-col items-center mb-10",children:[e.jsx("div",{className:"w-16 h-16 flex items-center justify-center mb-6",children:e.jsx("img",{src:"white_logo.png",alt:"Logo",className:"w-full h-full object-contain"})}),e.jsx("h1",{className:"text-3xl font-semibold text-zinc-100 tracking-tight mb-3",children:f}),e.jsx("p",{className:"text-zinc-500 text-sm",children:u})]}),e.jsxs("form",{onSubmit:y,className:"space-y-4 mb-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Email"}),e.jsx(X,{type:"email",value:o,onChange:N=>a(N.target.value),placeholder:"name@company.com",required:!0,className:"h-11 bg-zinc-900/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Password"}),e.jsx(X,{type:"password",value:l,onChange:N=>c(N.target.value),placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",required:!0,minLength:6,className:"h-11 bg-zinc-900/50"})]})]}),d&&e.jsx("div",{className:"text-xs text-red-300 bg-red-900/20 px-3 py-2 rounded-md border border-red-900/30",children:d}),e.jsx(E,{variant:"default",type:"submit",disabled:x,className:"w-full h-12",children:x?"Loading...":j})]}),e.jsx("div",{className:"text-center",children:e.jsx(E,{variant:"ghost",onClick:g,className:"text-sm",children:h})})]})})}function ut({onNavigate:t}){const{t:s}=U(),[n,r]=i.useState(""),o=i.useRef(null),a=n.trim().length>0;i.useEffect(()=>{o.current?.focus()},[]);const l=i.useCallback(c=>{c.preventDefault();const d=n.trim();d&&(sessionStorage.setItem("onboarding-name",d),t("onboarding-2"))},[n,t]);return e.jsx("div",{className:"page active flex-col items-center justify-center min-h-screen px-4 animate-fade-in w-full",children:e.jsxs("div",{className:"w-full max-w-[480px]",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("h2",{className:"text-3xl font-semibold text-zinc-100 tracking-tight mb-2",children:s.onboarding.name.title}),e.jsx("p",{className:"text-zinc-500 text-base",children:s.onboarding.name.subtitle})]}),e.jsxs("form",{onSubmit:l,className:"relative",children:[e.jsx(X,{ref:o,type:"text",value:n,onChange:c=>r(c.target.value),placeholder:s.onboarding.name.placeholder,required:!0,className:"w-full text-2xl py-5 px-0 border-0 border-b rounded-none text-center"}),e.jsx("div",{className:"flex justify-center mt-10",children:e.jsxs(E,{variant:"default",type:"submit",disabled:!a,className:"px-10 py-2.5 rounded-full flex items-center gap-2",children:[s.onboarding.name.next,e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]})]})})}const Me=(...t)=>t.filter((s,n,r)=>!!s&&s.trim()!==""&&r.indexOf(s)===n).join(" ").trim();const mt=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const xt=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,n,r)=>r?r.toUpperCase():n.toLowerCase());const ke=t=>{const s=xt(t);return s.charAt(0).toUpperCase()+s.slice(1)};var pt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ht=t=>{for(const s in t)if(s.startsWith("aria-")||s==="role"||s==="title")return!0;return!1};const ft=i.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:a,iconNode:l,...c},d)=>i.createElement("svg",{ref:d,...pt,width:s,height:s,stroke:t,strokeWidth:r?Number(n)*24/Number(s):n,className:Me("lucide",o),...!a&&!ht(c)&&{"aria-hidden":"true"},...c},[...l.map(([m,x])=>i.createElement(m,x)),...Array.isArray(a)?a:[a]]));const R=(t,s)=>{const n=i.forwardRef(({className:r,...o},a)=>i.createElement(ft,{ref:a,iconNode:s,className:Me(`lucide-${mt(ke(t))}`,`lucide-${t}`,r),...o}));return n.displayName=ke(t),n};const gt=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Ee=R("brain",gt);const bt=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Te=R("briefcase",bt);const vt=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],me=R("check",vt);const yt=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],jt=R("credit-card",yt);const Nt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],wt=R("globe",Nt);const zt=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],kt=R("keyboard",zt);const Ct=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],St=R("log-out",Ct);const _t=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],It=R("menu",_t);const Mt=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Re=R("message-circle",Mt);const Et=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],Tt=R("monitor",Et);const Rt=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Ae=R("palette",Rt);const At=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],Ft=R("panel-left-close",At);const Pt=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],$t=R("pen-line",Pt);const Lt=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ot=R("plus",Lt);const Dt=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],Fe=R("settings-2",Dt);const Ut=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Bt=R("settings",Ut);const Vt=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],Gt=R("text-align-start",Vt);const qt=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Wt=R("trash-2",qt);const Kt=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ht=R("user",Kt);const Zt=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Yt=R("zap",Zt);function Jt({onNavigate:t}){const s=D(),[n,r]=i.useState(null),[o,a]=i.useState(!1),l=d=>{r(d)},c=async()=>{if(n){a(!0);try{await s.profile.update({language:n}),localStorage.setItem("app_language",n),await s.profile.get(),t("onboarding-1")}catch(d){console.error("Failed to save language:",d),a(!1)}}};return e.jsxs("div",{className:"flex flex-col h-screen bg-[#09090b] text-zinc-100 font-sans selection:bg-zinc-800",children:[e.jsxs("div",{className:"flex-1 flex flex-col justify-center max-w-xl mx-auto w-full px-8 animate-fade-in relative z-10",children:[e.jsxs("div",{className:"mb-8 text-center space-y-2",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-2xl bg-zinc-900 border border-zinc-800 mb-6 shadow-sm",children:e.jsx("span",{className:"text-xl",children:"ðŸŒ"})}),e.jsxs("h1",{className:"text-3xl font-semibold tracking-tight text-white/90",children:["Choose your language",e.jsx("br",{}),e.jsx("span",{className:"text-2xl text-zinc-400 font-normal mt-1 block",children:"è¨€èªžã‚’é¸æŠžã—ã¦ãã ã•ã„"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[e.jsxs("button",{onClick:()=>l("en"),className:`group relative p-6 rounded-2xl border transition-all duration-200 text-left hover:border-zinc-600 ${n==="en"?"bg-zinc-800/80 border-orange-500/50 ring-1 ring-orange-500/50":"bg-zinc-900/50 border-zinc-800 hover:bg-zinc-800/50"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ‡ºðŸ‡¸"}),n==="en"&&e.jsx("div",{className:"w-5 h-5 rounded-full bg-orange-500 flex items-center justify-center",children:e.jsx(me,{className:"w-3 h-3 text-white",strokeWidth:3})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:`font-medium ${n==="en"?"text-white":"text-zinc-300"}`,children:"English"}),e.jsx("p",{className:"text-xs text-zinc-500",children:"Fast, accurate responses in English."})]})]}),e.jsxs("button",{onClick:()=>l("ja"),className:`group relative p-6 rounded-2xl border transition-all duration-200 text-left hover:border-zinc-600 ${n==="ja"?"bg-zinc-800/80 border-orange-500/50 ring-1 ring-orange-500/50":"bg-zinc-900/50 border-zinc-800 hover:bg-zinc-800/50"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ‡¯ðŸ‡µ"}),n==="ja"&&e.jsx("div",{className:"w-5 h-5 rounded-full bg-orange-500 flex items-center justify-center",children:e.jsx(me,{className:"w-3 h-3 text-white",strokeWidth:3})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:`font-medium ${n==="ja"?"text-white":"text-zinc-300"}`,children:"æ—¥æœ¬èªž"}),e.jsx("p",{className:"text-xs text-zinc-500",children:"æ—¥æœ¬èªžã§ã®æ­£ç¢ºãªå¿œç­”ã€‚"})]})]})]}),e.jsx(E,{className:"w-full h-12 text-base font-medium bg-white text-black hover:bg-zinc-200 transition-all rounded-xl disabled:opacity-50 disabled:cursor-not-allowed",onClick:c,disabled:!n||o,children:o?"Saving...":"Continue / æ¬¡ã¸"})]}),e.jsx("div",{className:"fixed inset-0 bg-gradient-to-t from-zinc-950 via-zinc-950/80 to-zinc-950/20 pointer-events-none z-0"})]})}const ee=i.forwardRef(({className:t,...s},n)=>e.jsx("textarea",{className:te("flex min-h-[60px] w-full rounded-md border border-zinc-800 bg-transparent px-3 py-2 text-sm text-zinc-200 transition-colors placeholder:text-zinc-600 focus:outline-none focus:border-zinc-600 disabled:cursor-not-allowed disabled:opacity-50 resize-none",t),ref:n,...s}));ee.displayName="Textarea";function Qt({onNavigate:t}){D();const{t:s}=U(),n=[{id:"professional",title:s.onboarding.style.options.professional.label,Icon:Te,description:s.onboarding.style.options.professional.description,example:s.onboarding.style.options.professional.example},{id:"casual",title:s.onboarding.style.options.casual.label,Icon:Re,description:s.onboarding.style.options.casual.description,example:s.onboarding.style.options.casual.example},{id:"concise",title:s.onboarding.style.options.concise.label,Icon:Yt,description:s.onboarding.style.options.concise.description,example:s.onboarding.style.options.concise.example},{id:"creative",title:s.onboarding.style.options.creative.label,Icon:Ae,description:s.onboarding.style.options.creative.description,example:s.onboarding.style.options.creative.example}],[r,o]=i.useState(null),[a,l]=i.useState(""),[c,d]=i.useState(!1),m=r&&(r!=="custom"||a.trim().length>0),x=i.useCallback(u=>{o(u),u!=="custom"&&l("")},[]),p=i.useCallback(()=>{t("onboarding-1")},[t]),f=i.useCallback(()=>{if(r){if(r==="custom"&&!a.trim()){alert(s.onboarding.style.options.custom.placeholder);return}sessionStorage.setItem("onboarding-style",r),r==="custom"&&sessionStorage.setItem("onboarding-style-guide",a.trim()),t("onboarding-3")}},[r,a,t]);return e.jsx("div",{className:"page active flex-col items-center justify-center min-h-screen px-4 py-8 animate-slide-up w-full",children:e.jsxs("div",{className:"w-full max-w-4xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-semibold text-zinc-100 tracking-tight mb-2",children:s.onboarding.style.title}),e.jsx("p",{className:"text-zinc-500 text-base",children:s.onboarding.style.subtitle})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-8",children:[n.map(u=>e.jsxs("button",{type:"button",onClick:()=>x(u.id),className:`text-left p-4 rounded-xl transition-all duration-300 group border relative overflow-hidden ${r===u.id?"bg-zinc-800 border-zinc-500":"bg-[#1e1e20] border-zinc-800/50 hover:bg-zinc-800/50 hover:border-zinc-700"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors duration-300 flex-shrink-0 ${r===u.id?"bg-zinc-100 text-zinc-950":"bg-zinc-900 text-zinc-500 group-hover:text-zinc-300"}`,children:e.jsx(u.Icon,{className:"w-4 h-4"})}),e.jsx("h3",{className:`text-base font-medium ${r===u.id?"text-zinc-100":"text-zinc-300"}`,children:u.title})]}),e.jsx("p",{className:"text-sm text-zinc-500 mb-3 leading-relaxed",children:u.description}),e.jsx("div",{className:`text-xs italic leading-relaxed pl-3 border-l-2 ${r===u.id?"text-zinc-300 border-zinc-500":"text-zinc-600 border-zinc-800"}`,children:u.example})]},u.id)),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("button",{type:"button",onClick:()=>x("custom"),className:`w-full text-left p-4 rounded-xl transition-all duration-300 border relative overflow-hidden ${r==="custom"?"bg-zinc-800 border-zinc-500":"bg-[#1e1e20] border-zinc-800/50 hover:bg-zinc-800/50 hover:border-zinc-700"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors flex-shrink-0 ${r==="custom"?"bg-zinc-100 text-zinc-950":"bg-zinc-900 text-zinc-500"}`,children:e.jsx(Fe,{className:"w-4 h-4"})}),e.jsx("h3",{className:`text-base font-medium ${r==="custom"?"text-zinc-100":"text-zinc-300"}`,children:"Custom"})]}),e.jsx("p",{className:"text-sm text-zinc-500",children:"Define your own system prompt instructions."})]}),r==="custom"&&e.jsx("div",{className:"mt-3 animate-fade-in",children:e.jsx(ee,{value:a,onChange:u=>l(u.target.value),className:"w-full bg-[#121214] min-h-[80px] font-mono shadow-inner text-sm",placeholder:s.onboarding.style.options.custom.placeholder})})]})]}),e.jsxs("div",{className:"flex justify-between items-center max-w-4xl mx-auto w-full",children:[e.jsxs(E,{variant:"ghost",type:"button",onClick:p,className:"px-0 hover:bg-transparent flex items-center gap-2 text-zinc-400 hover:text-zinc-300",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),e.jsxs(E,{variant:"default",type:"button",onClick:f,disabled:!m,className:"px-8 py-2.5 rounded-full flex items-center gap-2",children:[s.onboarding.name.next,e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})})}function Pe({platform:t}){const s=t==="darwin"||typeof navigator<"u"&&navigator.platform.toUpperCase().indexOf("MAC")>=0,n=s?"âŒ˜":"Ctrl",r=s?"â‡§":"Shift";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-[#1e1e20] border border-zinc-800/50 rounded-xl p-6 flex flex-col items-center justify-center gap-4 text-center group hover:bg-zinc-800/50 hover:border-zinc-700 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("kbd",{className:"h-12 min-w-[48px] px-3 flex items-center justify-center bg-zinc-900 border-b-4 border-zinc-950 rounded-lg text-zinc-100 font-mono text-xl shadow-lg group-hover:translate-y-[2px] group-hover:border-b-2 group-hover:shadow-md transition-all duration-200",children:n}),e.jsx("span",{className:"text-zinc-600 font-light text-2xl",children:"+"}),e.jsx("kbd",{className:"h-12 min-w-[48px] px-3 flex items-center justify-center bg-zinc-900 border-b-4 border-zinc-950 rounded-lg text-zinc-100 font-mono text-xl shadow-lg group-hover:translate-y-[2px] group-hover:border-b-2 group-hover:shadow-md transition-all duration-200",children:"/"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-zinc-100 font-medium mb-1",children:"Toggle AI Assistant"}),e.jsx("p",{className:"text-zinc-500 text-sm",children:"Open/close overlay (captures selected text when opening)"})]})]}),e.jsxs("div",{className:"bg-[#1e1e20] border border-zinc-800/50 rounded-xl p-6 flex flex-col items-center justify-center gap-4 text-center group hover:bg-zinc-800/50 hover:border-zinc-700 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("kbd",{className:"h-12 min-w-[48px] px-3 flex items-center justify-center bg-zinc-900 border-b-4 border-zinc-950 rounded-lg text-zinc-100 font-mono text-xl shadow-lg group-hover:translate-y-[2px] group-hover:border-b-2 group-hover:shadow-md transition-all duration-200",children:n}),e.jsx("span",{className:"text-zinc-600 font-light text-2xl",children:"+"}),e.jsx("kbd",{className:"h-12 min-w-[48px] px-3 flex items-center justify-center bg-zinc-900 border-b-4 border-zinc-950 rounded-lg text-zinc-100 font-mono text-xl shadow-lg group-hover:translate-y-[2px] group-hover:border-b-2 group-hover:shadow-md transition-all duration-200",children:"."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-zinc-100 font-medium mb-1",children:"Update Context"}),e.jsx("p",{className:"text-zinc-500 text-sm",children:"Capture newly selected text when overlay is open"})]})]}),e.jsxs("div",{className:"bg-[#1e1e20] border border-zinc-800/50 rounded-xl p-6 flex flex-col items-center justify-center gap-4 text-center group hover:bg-zinc-800/50 hover:border-zinc-700 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("kbd",{className:"h-12 min-w-[48px] px-3 flex items-center justify-center bg-zinc-900 border-b-4 border-zinc-950 rounded-lg text-zinc-100 font-mono text-xl shadow-lg group-hover:translate-y-[2px] group-hover:border-b-2 group-hover:shadow-md transition-all duration-200",children:n}),e.jsx("span",{className:"text-zinc-600 font-light text-2xl",children:"+"}),s?e.jsxs(e.Fragment,{children:[e.jsx("kbd",{className:"h-12 min-w-[48px] px-3 flex items-center justify-center bg-zinc-900 border-b-4 border-zinc-950 rounded-lg text-zinc-100 font-mono text-xl shadow-lg group-hover:translate-y-[2px] group-hover:border-b-2 group-hover:shadow-md transition-all duration-200",children:r}),e.jsx("span",{className:"text-zinc-600 font-light text-2xl",children:"+"}),e.jsx("kbd",{className:"h-12 min-w-[48px] px-3 flex items-center justify-center bg-zinc-900 border-b-4 border-zinc-950 rounded-lg text-zinc-100 font-mono text-xl shadow-lg group-hover:translate-y-[2px] group-hover:border-b-2 group-hover:shadow-md transition-all duration-200",children:"/"})]}):e.jsx("kbd",{className:"h-12 min-w-[48px] px-3 flex items-center justify-center bg-zinc-900 border-b-4 border-zinc-950 rounded-lg text-zinc-100 font-mono text-xl shadow-lg group-hover:translate-y-[2px] group-hover:border-b-2 group-hover:shadow-md transition-all duration-200",children:","})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-zinc-100 font-medium mb-1",children:"Open Settings"}),e.jsx("p",{className:"text-zinc-500 text-sm",children:"Manage your preferences"})]})]})]}),e.jsxs("div",{className:"mt-8 space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium text-zinc-300",children:"Usage Tips"}),e.jsxs("div",{className:"space-y-3 text-sm text-zinc-400",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("span",{className:"text-zinc-500 shrink-0",children:"1."}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-zinc-300",children:"Quick refine:"})," Highlight text first, then press ",e.jsxs("kbd",{className:"px-1.5 py-0.5 bg-zinc-900 border border-zinc-800 rounded text-xs font-mono",children:[n,"+/"]}),' to open with context. Type "refine this" or "fix grammar".']})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("span",{className:"text-zinc-500 shrink-0",children:"2."}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-zinc-300",children:"Update context:"})," While overlay is open, select different text and press ",e.jsxs("kbd",{className:"px-1.5 py-0.5 bg-zinc-900 border border-zinc-800 rounded text-xs font-mono",children:[n,"+."]})," to update the context without closing."]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("span",{className:"text-zinc-500 shrink-0",children:"3."}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-zinc-300",children:"Clean toggle:"})," Press ",e.jsxs("kbd",{className:"px-1.5 py-0.5 bg-zinc-900 border border-zinc-800 rounded text-xs font-mono",children:[n,"+/"]})," again to close the overlay - simple and predictable."]})]})]})]})]})}function Xt({onNavigate:t}){const s=D(),{t:n}=U(),r=i.useCallback(async()=>{const a=sessionStorage.getItem("onboarding-name")||"",l=sessionStorage.getItem("onboarding-style")||"professional",c=sessionStorage.getItem("onboarding-style-guide")||null;try{const d=await s.onboarding.complete({displayName:a,writingStyle:l,writingStyleGuide:c});if(!d.success){console.error("Failed to complete onboarding:",d.error),alert("Failed to complete setup: "+d.error);return}sessionStorage.removeItem("onboarding-name"),sessionStorage.removeItem("onboarding-style"),sessionStorage.removeItem("onboarding-style-guide")}catch(d){console.error("Failed to complete onboarding:",d),alert("Failed to complete setup")}},[s]),o=i.useCallback(()=>{t("onboarding-2")},[t]);return i.useEffect(()=>{const a=l=>{const d=typeof navigator<"u"&&navigator.platform.toUpperCase().indexOf("MAC")>=0?l.metaKey:l.ctrlKey;d&&l.key==="/"&&!l.shiftKey&&(l.preventDefault(),r()),d&&l.shiftKey&&l.key==="/"&&(l.preventDefault(),r())};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[r]),e.jsx("div",{className:"page active flex-col items-center justify-center min-h-screen px-4 animate-slide-up w-full",children:e.jsxs("div",{className:"w-full max-w-4xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-semibold text-zinc-100 tracking-tight mb-2",children:n.onboarding.finish.title}),e.jsx("p",{className:"text-zinc-500 text-base",children:n.onboarding.finish.subtitle})]}),e.jsx("div",{className:"mb-8",children:e.jsx(Pe,{platform:navigator.platform})}),e.jsxs("div",{className:"flex justify-between items-center max-w-4xl mx-auto w-full",children:[e.jsxs(E,{variant:"ghost",type:"button",onClick:o,className:"px-0 hover:bg-transparent flex items-center gap-2 text-zinc-400 hover:text-zinc-300",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),e.jsx(E,{variant:"ghost",type:"button",onClick:r,className:"text-zinc-500 hover:text-zinc-300 hover:bg-transparent",children:"Skip for now"})]})]})})}function O(t,s,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t?.(o),n===!1||!o.defaultPrevented)return s?.(o)}}function Ne(t,s=[]){let n=[];function r(a,l){const c=i.createContext(l),d=n.length;n=[...n,l];const m=p=>{const{scope:f,children:u,...j}=p,h=f?.[t]?.[d]||c,g=i.useMemo(()=>j,Object.values(j));return e.jsx(h.Provider,{value:g,children:u})};m.displayName=a+"Provider";function x(p,f){const u=f?.[t]?.[d]||c,j=i.useContext(u);if(j)return j;if(l!==void 0)return l;throw new Error(`\`${p}\` must be used within \`${a}\``)}return[m,x]}const o=()=>{const a=n.map(l=>i.createContext(l));return function(c){const d=c?.[t]||a;return i.useMemo(()=>({[`__scope${t}`]:{...c,[t]:d}}),[c,d])}};return o.scopeName=t,[r,es(o,...s)]}function es(...t){const s=t[0];if(t.length===1)return s;const n=()=>{const r=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(a){const l=r.reduce((c,{useScope:d,scopeName:m})=>{const p=d(a)[`__scope${m}`];return{...c,...p}},{});return i.useMemo(()=>({[`__scope${s.scopeName}`]:l}),[l])}};return n.scopeName=s.scopeName,n}function Ce(t){const s=ts(t),n=i.forwardRef((r,o)=>{const{children:a,...l}=r,c=i.Children.toArray(a),d=c.find(ns);if(d){const m=d.props.children,x=c.map(p=>p===d?i.Children.count(m)>1?i.Children.only(null):i.isValidElement(m)?m.props.children:null:p);return e.jsx(s,{...l,ref:o,children:i.isValidElement(m)?i.cloneElement(m,void 0,x):null})}return e.jsx(s,{...l,ref:o,children:a})});return n.displayName=`${t}.Slot`,n}function ts(t){const s=i.forwardRef((n,r)=>{const{children:o,...a}=n;if(i.isValidElement(o)){const l=rs(o),c=is(a,o.props);return o.type!==i.Fragment&&(c.ref=r?_e(r,l):l),i.cloneElement(o,c)}return i.Children.count(o)>1?i.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var ss=Symbol("radix.slottable");function ns(t){return i.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===ss}function is(t,s){const n={...s};for(const r in s){const o=t[r],a=s[r];/^on[A-Z]/.test(r)?o&&a?n[r]=(...c)=>{const d=a(...c);return o(...c),d}:o&&(n[r]=o):r==="style"?n[r]={...o,...a}:r==="className"&&(n[r]=[o,a].filter(Boolean).join(" "))}return{...t,...n}}function rs(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function as(t){const s=t+"CollectionProvider",[n,r]=Ne(s),[o,a]=n(s,{collectionRef:{current:null},itemMap:new Map}),l=h=>{const{scope:g,children:y}=h,N=B.useRef(null),w=B.useRef(new Map).current;return e.jsx(o,{scope:g,itemMap:w,collectionRef:N,children:y})};l.displayName=s;const c=t+"CollectionSlot",d=Ce(c),m=B.forwardRef((h,g)=>{const{scope:y,children:N}=h,w=a(c,y),z=ue(g,w.collectionRef);return e.jsx(d,{ref:z,children:N})});m.displayName=c;const x=t+"CollectionItemSlot",p="data-radix-collection-item",f=Ce(x),u=B.forwardRef((h,g)=>{const{scope:y,children:N,...w}=h,z=B.useRef(null),k=ue(g,z),A=a(x,y);return B.useEffect(()=>(A.itemMap.set(z,{ref:z,...w}),()=>{A.itemMap.delete(z)})),e.jsx(f,{[p]:"",ref:k,children:N})});u.displayName=x;function j(h){const g=a(t+"CollectionConsumer",h);return B.useCallback(()=>{const N=g.collectionRef.current;if(!N)return[];const w=Array.from(N.querySelectorAll(`[${p}]`));return Array.from(g.itemMap.values()).sort((A,I)=>w.indexOf(A.ref.current)-w.indexOf(I.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:l,Slot:m,ItemSlot:u},j,r]}var xe=globalThis?.document?i.useLayoutEffect:()=>{},os=Ie[" useId ".trim().toString()]||(()=>{}),cs=0;function $e(t){const[s,n]=i.useState(os());return xe(()=>{n(r=>r??String(cs++))},[t]),s?`radix-${s}`:""}ot();function ls(t){const s=ds(t),n=i.forwardRef((r,o)=>{const{children:a,...l}=r,c=i.Children.toArray(a),d=c.find(ms);if(d){const m=d.props.children,x=c.map(p=>p===d?i.Children.count(m)>1?i.Children.only(null):i.isValidElement(m)?m.props.children:null:p);return e.jsx(s,{...l,ref:o,children:i.isValidElement(m)?i.cloneElement(m,void 0,x):null})}return e.jsx(s,{...l,ref:o,children:a})});return n.displayName=`${t}.Slot`,n}function ds(t){const s=i.forwardRef((n,r)=>{const{children:o,...a}=n;if(i.isValidElement(o)){const l=ps(o),c=xs(a,o.props);return o.type!==i.Fragment&&(c.ref=r?_e(r,l):l),i.cloneElement(o,c)}return i.Children.count(o)>1?i.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var us=Symbol("radix.slottable");function ms(t){return i.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===us}function xs(t,s){const n={...s};for(const r in s){const o=t[r],a=s[r];/^on[A-Z]/.test(r)?o&&a?n[r]=(...c)=>{const d=a(...c);return o(...c),d}:o&&(n[r]=o):r==="style"?n[r]={...o,...a}:r==="className"&&(n[r]=[o,a].filter(Boolean).join(" "))}return{...t,...n}}function ps(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var hs=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Y=hs.reduce((t,s)=>{const n=ls(`Primitive.${s}`),r=i.forwardRef((o,a)=>{const{asChild:l,...c}=o,d=l?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(d,{...c,ref:a})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{});function fs(t){const s=i.useRef(t);return i.useEffect(()=>{s.current=t}),i.useMemo(()=>(...n)=>s.current?.(...n),[])}var gs=Ie[" useInsertionEffect ".trim().toString()]||xe;function Le({prop:t,defaultProp:s,onChange:n=()=>{},caller:r}){const[o,a,l]=bs({defaultProp:s,onChange:n}),c=t!==void 0,d=c?t:o;{const x=i.useRef(t!==void 0);i.useEffect(()=>{const p=x.current;p!==c&&console.warn(`${r} is changing from ${p?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),x.current=c},[c,r])}const m=i.useCallback(x=>{if(c){const p=vs(x)?x(t):x;p!==t&&l.current?.(p)}else a(x)},[c,t,a,l]);return[d,m]}function bs({defaultProp:t,onChange:s}){const[n,r]=i.useState(t),o=i.useRef(n),a=i.useRef(s);return gs(()=>{a.current=s},[s]),i.useEffect(()=>{o.current!==n&&(a.current?.(n),o.current=n)},[n,o]),[n,r,a]}function vs(t){return typeof t=="function"}var ys=i.createContext(void 0);function Oe(t){const s=i.useContext(ys);return t||s||"ltr"}var ve="rovingFocusGroup.onEntryFocus",js={bubbles:!1,cancelable:!0},se="RovingFocusGroup",[je,De,Ns]=as(se),[ws,Ue]=Ne(se,[Ns]),[zs,ks]=ws(se),Be=i.forwardRef((t,s)=>e.jsx(je.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(je.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(Cs,{...t,ref:s})})}));Be.displayName=se;var Cs=i.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:a,currentTabStopId:l,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:d,onEntryFocus:m,preventScrollOnEntryFocus:x=!1,...p}=t,f=i.useRef(null),u=ue(s,f),j=Oe(a),[h,g]=Le({prop:l,defaultProp:c??null,onChange:d,caller:se}),[y,N]=i.useState(!1),w=fs(m),z=De(n),k=i.useRef(!1),[A,I]=i.useState(0);return i.useEffect(()=>{const C=f.current;if(C)return C.addEventListener(ve,w),()=>C.removeEventListener(ve,w)},[w]),e.jsx(zs,{scope:n,orientation:r,dir:j,loop:o,currentTabStopId:h,onItemFocus:i.useCallback(C=>g(C),[g]),onItemShiftTab:i.useCallback(()=>N(!0),[]),onFocusableItemAdd:i.useCallback(()=>I(C=>C+1),[]),onFocusableItemRemove:i.useCallback(()=>I(C=>C-1),[]),children:e.jsx(Y.div,{tabIndex:y||A===0?-1:0,"data-orientation":r,...p,ref:u,style:{outline:"none",...t.style},onMouseDown:O(t.onMouseDown,()=>{k.current=!0}),onFocus:O(t.onFocus,C=>{const P=!k.current;if(C.target===C.currentTarget&&P&&!y){const F=new CustomEvent(ve,js);if(C.currentTarget.dispatchEvent(F),!F.defaultPrevented){const _=z().filter(T=>T.focusable),M=_.find(T=>T.active),b=_.find(T=>T.id===h),L=[M,b,..._].filter(Boolean).map(T=>T.ref.current);qe(L,x)}}k.current=!1}),onBlur:O(t.onBlur,()=>N(!1))})})}),Ve="RovingFocusGroupItem",Ge=i.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:a,children:l,...c}=t,d=$e(),m=a||d,x=ks(Ve,n),p=x.currentTabStopId===m,f=De(n),{onFocusableItemAdd:u,onFocusableItemRemove:j,currentTabStopId:h}=x;return i.useEffect(()=>{if(r)return u(),()=>j()},[r,u,j]),e.jsx(je.ItemSlot,{scope:n,id:m,focusable:r,active:o,children:e.jsx(Y.span,{tabIndex:p?0:-1,"data-orientation":x.orientation,...c,ref:s,onMouseDown:O(t.onMouseDown,g=>{r?x.onItemFocus(m):g.preventDefault()}),onFocus:O(t.onFocus,()=>x.onItemFocus(m)),onKeyDown:O(t.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){x.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const y=Is(g,x.orientation,x.dir);if(y!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let w=f().filter(z=>z.focusable).map(z=>z.ref.current);if(y==="last")w.reverse();else if(y==="prev"||y==="next"){y==="prev"&&w.reverse();const z=w.indexOf(g.currentTarget);w=x.loop?Ms(w,z+1):w.slice(z+1)}setTimeout(()=>qe(w))}}),children:typeof l=="function"?l({isCurrentTabStop:p,hasTabStop:h!=null}):l})})});Ge.displayName=Ve;var Ss={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function _s(t,s){return s!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Is(t,s,n){const r=_s(t.key,n);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Ss[r]}function qe(t,s=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:s}),document.activeElement!==n))return}function Ms(t,s){return t.map((n,r)=>t[(s+r)%t.length])}var Es=Be,Ts=Ge;function Rs(t,s){return i.useReducer((n,r)=>s[n][r]??n,t)}var We=t=>{const{present:s,children:n}=t,r=As(s),o=typeof n=="function"?n({present:r.isPresent}):i.Children.only(n),a=ue(r.ref,Fs(o));return typeof n=="function"||r.isPresent?i.cloneElement(o,{ref:a}):null};We.displayName="Presence";function As(t){const[s,n]=i.useState(),r=i.useRef(null),o=i.useRef(t),a=i.useRef("none"),l=t?"mounted":"unmounted",[c,d]=Rs(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return i.useEffect(()=>{const m=le(r.current);a.current=c==="mounted"?m:"none"},[c]),xe(()=>{const m=r.current,x=o.current;if(x!==t){const f=a.current,u=le(m);t?d("MOUNT"):u==="none"||m?.display==="none"?d("UNMOUNT"):d(x&&f!==u?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,d]),xe(()=>{if(s){let m;const x=s.ownerDocument.defaultView??window,p=u=>{const h=le(r.current).includes(CSS.escape(u.animationName));if(u.target===s&&h&&(d("ANIMATION_END"),!o.current)){const g=s.style.animationFillMode;s.style.animationFillMode="forwards",m=x.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=g)})}},f=u=>{u.target===s&&(a.current=le(r.current))};return s.addEventListener("animationstart",f),s.addEventListener("animationcancel",p),s.addEventListener("animationend",p),()=>{x.clearTimeout(m),s.removeEventListener("animationstart",f),s.removeEventListener("animationcancel",p),s.removeEventListener("animationend",p)}}else d("ANIMATION_END")},[s,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:i.useCallback(m=>{r.current=m?getComputedStyle(m):null,n(m)},[])}}function le(t){return t?.animationName||"none"}function Fs(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var pe="Tabs",[Ps]=Ne(pe,[Ue]),Ke=Ue(),[$s,we]=Ps(pe),He=i.forwardRef((t,s)=>{const{__scopeTabs:n,value:r,onValueChange:o,defaultValue:a,orientation:l="horizontal",dir:c,activationMode:d="automatic",...m}=t,x=Oe(c),[p,f]=Le({prop:r,onChange:o,defaultProp:a??"",caller:pe});return e.jsx($s,{scope:n,baseId:$e(),value:p,onValueChange:f,orientation:l,dir:x,activationMode:d,children:e.jsx(Y.div,{dir:x,"data-orientation":l,...m,ref:s})})});He.displayName=pe;var Ze="TabsList",Ye=i.forwardRef((t,s)=>{const{__scopeTabs:n,loop:r=!0,...o}=t,a=we(Ze,n),l=Ke(n);return e.jsx(Es,{asChild:!0,...l,orientation:a.orientation,dir:a.dir,loop:r,children:e.jsx(Y.div,{role:"tablist","aria-orientation":a.orientation,...o,ref:s})})});Ye.displayName=Ze;var Je="TabsTrigger",Qe=i.forwardRef((t,s)=>{const{__scopeTabs:n,value:r,disabled:o=!1,...a}=t,l=we(Je,n),c=Ke(n),d=tt(l.baseId,r),m=st(l.baseId,r),x=r===l.value;return e.jsx(Ts,{asChild:!0,...c,focusable:!o,active:x,children:e.jsx(Y.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":m,"data-state":x?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:d,...a,ref:s,onMouseDown:O(t.onMouseDown,p=>{!o&&p.button===0&&p.ctrlKey===!1?l.onValueChange(r):p.preventDefault()}),onKeyDown:O(t.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&l.onValueChange(r)}),onFocus:O(t.onFocus,()=>{const p=l.activationMode!=="manual";!x&&!o&&p&&l.onValueChange(r)})})})});Qe.displayName=Je;var Xe="TabsContent",et=i.forwardRef((t,s)=>{const{__scopeTabs:n,value:r,forceMount:o,children:a,...l}=t,c=we(Xe,n),d=tt(c.baseId,r),m=st(c.baseId,r),x=r===c.value,p=i.useRef(x);return i.useEffect(()=>{const f=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(f)},[]),e.jsx(We,{present:o||x,children:({present:f})=>e.jsx(Y.div,{"data-state":x?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!f,id:m,tabIndex:0,...l,ref:s,style:{...t.style,animationDuration:p.current?"0s":void 0},children:f&&a})})});et.displayName=Xe;function tt(t,s){return`${t}-trigger-${s}`}function st(t,s){return`${t}-content-${s}`}var Ls=He,nt=Ye,it=Qe,rt=et;const Os=Ls,at=i.forwardRef(({className:t,...s},n)=>e.jsx(nt,{ref:n,className:te("inline-flex flex-col items-stretch w-full space-y-1",t),...s}));at.displayName=nt.displayName;const H=i.forwardRef(({className:t,...s},n)=>e.jsx(it,{ref:n,className:te("flex items-center gap-3 text-left px-3 py-2 rounded-md text-sm transition-all duration-200 text-zinc-500 hover:bg-zinc-800/40 hover:text-zinc-300 data-[state=active]:bg-zinc-800/80 data-[state=active]:text-zinc-100 data-[state=active]:shadow-sm focus-visible:outline-none",t),...s}));H.displayName=it.displayName;const Z=i.forwardRef(({className:t,...s},n)=>e.jsx(rt,{ref:n,className:te("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s}));Z.displayName=rt.displayName;function Ds(){const t=D(),[s,n]=i.useState(null),[r,o]=i.useState(""),[a,l]=i.useState(!0),[c,d]=i.useState(!1),[m,x]=i.useState(""),[p,f]=i.useState("professional"),[u,j]=i.useState(""),[h,g]=i.useState("gemini-2.5-flash"),[y,N]=i.useState(!1),[w,z]=i.useState("en");i.useEffect(()=>{let b=!1;return(async()=>{try{const v=await t.profile.get();if(!b&&v.success){const T=v.profile;n(T),x(T.display_name||""),f(T.writing_style||"professional"),j(T.writing_style_guide||""),g(T.selected_model||"gemini-2.5-flash"),N(T.thinking_enabled||!1),N(T.thinking_enabled||!1);const q=T.language||"en";z(q),localStorage.setItem("app_language",q)}const L=await t.auth.getSession();!b&&L.success&&L.session&&o(L.session.user.email||"")}catch(v){console.error("Failed to load profile:",v)}finally{b||l(!1)}})(),()=>{b=!0}},[t]);const k=i.useCallback(async()=>{const b=m.trim();if(b)try{const v=await t.profile.update({display_name:b});v.success?(n(v.profile),d(!1)):alert("Failed to save: "+v.error)}catch{alert("Failed to save name")}},[m,t]),A=i.useCallback(async b=>{if(f(b),b!=="custom")try{const v=await t.profile.update({writing_style:b});v.success&&n(v.profile)}catch{console.error("Failed to update style")}},[t]),I=i.useCallback(async()=>{const b=u.trim();if(b)try{const v=await t.profile.update({writing_style:"custom",writing_style_guide:b});v.success&&(n(v.profile),alert("Custom style saved!"))}catch{alert("Failed to save style")}},[u,t]),C=i.useCallback(async b=>{try{const v=await t.profile.update({screenshot_enabled:b});v.success&&n(v.profile)}catch{console.error("Failed to update screenshot setting")}},[t]),P=i.useCallback(async b=>{g(b);try{const v=await t.profile.update({selected_model:b});v.success&&n(v.profile)}catch{console.error("Failed to update model selection")}},[t]),F=i.useCallback(async b=>{N(b);try{const v=await t.profile.update({thinking_enabled:b});v.success&&n(v.profile)}catch{console.error("Failed to update thinking setting")}},[t]),_=i.useCallback(async b=>{z(b),localStorage.setItem("app_language",b);try{const v=await t.profile.update({language:b});v.success&&n(v.profile)}catch{console.error("Failed to update language")}},[t]),M=i.useCallback(async()=>{try{await t.auth.signOut()}catch{alert("Failed to log out")}},[t]);return{profile:s,setProfile:n,userEmail:r,isLoading:a,isEditingName:c,setIsEditingName:d,editedName:m,setEditedName:x,selectedStyle:p,customStyleInput:u,setCustomStyleInput:j,selectedModel:h,thinkingEnabled:y,language:w,handleSaveName:k,handleStyleSelect:A,handleSaveCustomStyle:I,handleScreenshotToggle:C,handleModelSelect:P,handleThinkingToggle:F,handleLanguageSelect:_,handleLogout:M}}function Us(t,s){const n=D(),[r,o]=i.useState([]),[a,l]=i.useState(null),[c,d]=i.useState(s!==!1),[m,x]=i.useState(null),[p,f]=i.useState(""),[u,j]=i.useState(!1),[h,g]=i.useState(""),[y,N]=i.useState(!1),[w,z]=i.useState("");i.useEffect(()=>{if(t!=="memory")return;let _=!1;return(async()=>{try{const[M,b]=await Promise.all([n.facts.getAll(),n.facts.getStats()]);!_&&M.success&&o(M.facts||[]),!_&&b.success&&l(b.stats||null),_||d(s!==!1)}catch(M){console.error("Failed to load facts:",M)}})(),()=>{_=!0}},[t,n,s]);const k=i.useCallback(async()=>{const _=await n.facts.getStats();_.success&&l(_.stats||null)},[n]),A=i.useCallback(async _=>{try{(await n.facts.toggle(_)).success?d(_):alert("Failed to update setting")}catch{alert("Failed to update setting")}},[n]),I=i.useCallback(async _=>{if(p.trim())try{(await n.facts.update(_,p.trim())).success?(o(b=>b.map(v=>v.id===_?{...v,content:p.trim()}:v)),x(null),f("")):alert("Failed to update fact")}catch{alert("Failed to update fact")}},[p,n]),C=i.useCallback(async _=>{if(confirm("Are you sure you want to delete this memory?"))try{(await n.facts.delete(_)).success?(o(b=>b.filter(v=>v.id!==_)),await k()):alert("Failed to delete fact")}catch{alert("Failed to delete fact")}},[n,k]),P=i.useCallback(async()=>{if(h.trim()){N(!0),z("");try{const _=await n.facts.add(h.trim());_.success&&_.fact?(o(M=>[...M,_.fact]),g(""),j(!1),await k()):z(_.error||"Failed to add fact")}catch{z("Failed to add fact")}finally{N(!1)}}},[h,n,k]),F=a?a.remaining<=0:!1;return{facts:r,stats:a,isAtCapacity:F,memories:r,memoryStats:a?{total:a.count,by_category:{facts:a.count},last_session:void 0}:null,memoryEnabled:c,editingMemoryId:m,setEditingMemoryId:x,editingMemoryContent:p,setEditingMemoryContent:f,isAddingMemory:u,setIsAddingMemory:j,newMemoryContent:h,setNewMemoryContent:g,newMemoryCategory:"personal_info",setNewMemoryCategory:()=>{},isAddingLoading:y,addMemoryError:w,handleMemoryToggle:A,handleMemoryEdit:I,handleMemoryDelete:C,handleMemoryAdd:P}}const Bs=[{id:"gemini-2.5-flash",label:"Gemini 2.5 Flash",provider:"Google",description:"Fast, efficient. Recommended for most tasks."},{id:"gemini-3.0-flash",label:"Gemini 3.0 Flash",provider:"Google",description:"Next-gen speed and quality."},{id:"gemini-3.0-pro",label:"Gemini 3.0 Pro",provider:"Google",description:"Most capable Google model."},{id:"grok-3",label:"Grok 3",provider:"xAI",description:"xAI's smart model. Text-only (no screenshots)."},{id:"grok-4-0709",label:"Grok 4",provider:"xAI",description:"xAI's best model. Supports screenshot context."}];function Vs({selectedStyle:t,customStyleInput:s,screenshotEnabled:n,selectedModel:r,thinkingEnabled:o,language:a,onStyleSelect:l,onCustomStyleChange:c,onSaveCustomStyle:d,onScreenshotToggle:m,onModelSelect:x,onThinkingToggle:p,onLanguageSelect:f}){const{t:u}=U(),j=[{id:"professional",label:u.onboarding.style.options.professional.label,Icon:Te,description:u.onboarding.style.options.professional.description,example:u.onboarding.style.options.professional.example},{id:"casual",label:u.onboarding.style.options.casual.label,Icon:Re,description:u.onboarding.style.options.casual.description,example:u.onboarding.style.options.casual.example},{id:"concise",label:u.onboarding.style.options.concise.label,Icon:Gt,description:u.onboarding.style.options.concise.description,example:u.onboarding.style.options.concise.example},{id:"creative",label:u.onboarding.style.options.creative.label,Icon:Ae,description:u.onboarding.style.options.creative.description,example:u.onboarding.style.options.creative.example}];return e.jsxs("div",{className:"space-y-10",children:[e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-zinc-500 uppercase tracking-wider mb-1",children:u.settings.general.language.title}),e.jsx("p",{className:"text-xs text-zinc-600",children:u.settings.general.language.description})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:["en","ja"].map(h=>e.jsxs("button",{onClick:()=>f(h),className:`flex items-center gap-3 p-3 rounded-xl transition-all duration-200 border ${a===h?"bg-zinc-800/50 border-zinc-700":"bg-[#1e1e20] border-zinc-800/50 hover:bg-zinc-800/50 hover:border-zinc-700"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors duration-200 flex-shrink-0 ${a===h?"bg-zinc-800 text-zinc-200":"bg-zinc-900 text-zinc-500"}`,children:e.jsx(wt,{className:"w-4 h-4"})}),e.jsx("div",{className:"text-left",children:e.jsx("p",{className:`text-sm font-medium ${a===h?"text-zinc-200":"text-zinc-400"}`,children:h==="en"?"English":"æ—¥æœ¬èªž"})}),a===h&&e.jsx("div",{className:"ml-auto w-2 h-2 rounded-full bg-orange-500"})]},h))})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-zinc-500 uppercase tracking-wider mb-1",children:u.settings.general.style.title}),e.jsx("p",{className:"text-xs text-zinc-600",children:u.settings.general.style.description})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:j.map(h=>{const g=t===h.id;return e.jsxs("button",{type:"button",onClick:()=>l(h.id),className:`text-left p-4 rounded-xl transition-all duration-200 border group ${g?"bg-zinc-800/50 border-zinc-700":"bg-[#1e1e20] border-zinc-800/50 hover:bg-zinc-800/50 hover:border-zinc-700"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors duration-200 flex-shrink-0 ${g?"bg-zinc-800 text-zinc-200":"bg-zinc-900 text-zinc-500 group-hover:text-zinc-400"}`,children:e.jsx(h.Icon,{className:"w-4 h-4"})}),e.jsx("span",{className:`text-sm font-medium ${g?"text-zinc-200":"text-zinc-400"}`,children:h.label})]}),e.jsx("p",{className:"text-xs text-zinc-500 mb-2 leading-relaxed",children:h.description}),e.jsx("div",{className:`text-xs italic leading-relaxed pl-3 border-l-2 ${g?"text-zinc-400 border-zinc-600":"text-zinc-600 border-zinc-800"}`,children:h.example})]},h.id)})}),e.jsxs("div",{children:[e.jsxs("button",{type:"button",onClick:()=>l("custom"),className:`w-full text-left p-4 rounded-xl transition-all duration-200 border group ${t==="custom"?"bg-zinc-800/50 border-zinc-700":"bg-[#1e1e20] border-zinc-800/50 hover:bg-zinc-800/70 hover:border-zinc-700"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors duration-200 flex-shrink-0 ${t==="custom"?"bg-zinc-700 text-zinc-200":"bg-zinc-900 text-zinc-500 group-hover:text-zinc-400"}`,children:e.jsx(Fe,{className:"w-4 h-4"})}),e.jsx("span",{className:`text-sm font-medium ${t==="custom"?"text-zinc-200":"text-zinc-400"}`,children:u.onboarding.style.options.custom.label})]}),e.jsx("p",{className:"text-xs text-zinc-500 pl-11",children:u.onboarding.style.options.custom.description})]}),t==="custom"&&e.jsxs("div",{className:"mt-3 animate-fade-in space-y-2",children:[e.jsx(ee,{value:s,onChange:h=>c(h.target.value),className:"w-full bg-[#121214] text-sm",placeholder:u.onboarding.style.options.custom.placeholder,rows:3,onClick:h=>h.stopPropagation()}),e.jsx(E,{variant:"default",size:"sm",onClick:d,className:"w-full text-xs",children:u.onboarding.style.options.custom.save})]})]})]}),e.jsxs("section",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-zinc-500 uppercase tracking-wider mb-1",children:u.settings.general.screen_recording.title}),e.jsx("p",{className:"text-xs text-zinc-600",children:u.settings.general.screen_recording.description})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-[#1e1e20] border border-zinc-800/50 cursor-pointer hover:bg-zinc-800/30 transition-colors",onClick:()=>m(!n),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-zinc-900 flex items-center justify-center flex-shrink-0",children:e.jsx(Tt,{className:"w-4 h-4 text-zinc-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-zinc-200",children:u.settings.general.screen_recording.label}),e.jsx("p",{className:"text-xs text-zinc-500 mt-0.5",children:u.settings.general.screen_recording.sublabel})]})]}),e.jsx("div",{className:`relative w-9 h-5 rounded-full transition-colors shrink-0 ml-4 ${n?"bg-orange-500":"bg-zinc-700"}`,children:e.jsx("div",{className:`absolute top-0.5 w-4 h-4 bg-white rounded-full shadow transition-transform ${n?"translate-x-4":"translate-x-0.5"}`})})]})]}),e.jsxs("section",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-zinc-500 uppercase tracking-wider mb-1",children:u.settings.general.model.title}),e.jsx("p",{className:"text-xs text-zinc-600",children:u.settings.general.model.description})]}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:Bs.map(({id:h,label:g,provider:y,description:N})=>e.jsxs("div",{onClick:()=>x(h),className:`p-3 rounded-lg cursor-pointer transition-all duration-200 border ${r===h?"bg-zinc-800/50 border-zinc-700":"border-transparent hover:bg-zinc-900/30"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:`text-sm font-medium ${r===h?"text-zinc-100":"text-zinc-300"}`,children:g}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] text-zinc-600 uppercase tracking-wider",children:y}),r===h&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-orange-500"})]})]}),e.jsx("p",{className:"text-xs text-zinc-500",children:N}),h==="gemini-2.5-flash"&&r==="gemini-2.5-flash"&&e.jsxs("div",{className:"mt-3 flex justify-between items-center",onClick:w=>{w.stopPropagation(),p(!o)},children:[e.jsx("span",{className:"text-xs text-zinc-400",children:u.settings.general.model.thinking_mode}),e.jsx("div",{className:`relative w-9 h-5 rounded-full transition-colors ${o?"bg-orange-500":"bg-zinc-700"}`,children:e.jsx("div",{className:`absolute top-0.5 w-4 h-4 bg-white rounded-full shadow transition-transform ${o?"translate-x-4":"translate-x-0.5"}`})})]})]},h))})]})]})}function Gs({userEmail:t,displayName:s,isEditingName:n,editedName:r,onEditName:o,onSaveName:a,onEditedNameChange:l}){const{t:c}=U();return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"space-y-3",children:[e.jsx("h3",{className:"text-xs font-medium text-zinc-500 uppercase tracking-wider mb-4",children:c.account.profile.title}),e.jsx("div",{className:"space-y-1",children:e.jsxs("div",{className:"flex justify-between items-center py-3 hover:bg-zinc-900/20 -mx-3 px-3 rounded-md transition-colors",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("h4",{className:"text-sm font-medium text-zinc-200",children:c.account.profile.name.label}),e.jsx("p",{className:"text-xs text-zinc-500",children:c.account.profile.name.description}),!n&&e.jsx("p",{className:"text-sm text-zinc-400",children:s||c.account.profile.name.not_set})]}),n?e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(X,{value:r,onChange:d=>l(d.target.value),className:"w-48",autoFocus:!0,onKeyDown:d=>{d.key==="Enter"&&a()}}),e.jsx(E,{variant:"default",size:"sm",onClick:a,className:"text-xs",children:c.account.profile.name.save})]}):e.jsx(E,{variant:"ghost",size:"sm",onClick:o,className:"text-xs",children:c.account.profile.name.edit})]})})]}),e.jsxs("section",{className:"space-y-3",children:[e.jsx("h3",{className:"text-xs font-medium text-zinc-500 uppercase tracking-wider mb-4",children:c.account.info.title}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between items-center py-3 hover:bg-zinc-900/20 -mx-3 px-3 rounded-md transition-colors",children:[e.jsx("span",{className:"text-sm text-zinc-400",children:c.account.info.email}),e.jsx("span",{className:"text-sm text-zinc-200",children:t||"Loading..."})]}),e.jsxs("div",{className:"flex justify-between items-center py-3 hover:bg-zinc-900/20 -mx-3 px-3 rounded-md transition-colors",children:[e.jsx("span",{className:"text-sm text-zinc-400",children:c.account.info.status.label}),e.jsx("span",{className:"text-xs px-2 py-0.5 bg-green-500/10 text-green-400 rounded-md",children:c.account.info.status.active})]})]})]}),e.jsxs("section",{className:"space-y-3",children:[e.jsx("h3",{className:"text-xs font-medium text-zinc-500 uppercase tracking-wider mb-4",children:c.account.security.title}),e.jsx("div",{className:"py-3",children:e.jsx("p",{className:"text-sm text-zinc-500",children:c.account.security.description})})]})]})}function qs({facts:t,stats:s,isAtCapacity:n,memoryEnabled:r,subscriptionTier:o,subscriptionStatus:a,editingMemoryId:l,editingMemoryContent:c,isAddingMemory:d,newMemoryContent:m,isAddingLoading:x,addMemoryError:p,onMemoryToggle:f,onSetEditingMemoryId:u,onSetEditingMemoryContent:j,onMemoryEdit:h,onMemoryDelete:g,onSetIsAddingMemory:y,onSetNewMemoryContent:N,onMemoryAdd:w,onNavigateToBilling:z}){const{t:k}=U(),A=o!=="free"&&a==="active";return e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsxs("section",{className:"space-y-3",children:[e.jsx("h3",{className:"text-xs font-medium text-zinc-500 uppercase tracking-wider mb-4",children:k.memory.enable.title}),e.jsxs("div",{className:"flex justify-between items-center py-3 hover:bg-zinc-900/20 -mx-3 px-3 rounded-md transition-colors",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("h3",{className:"text-sm font-medium text-zinc-200",children:k.memory.enable.subtitle}),e.jsx("p",{className:"text-xs text-zinc-500",children:k.memory.enable.description}),!A&&e.jsxs("p",{className:"text-xs text-zinc-600 mt-0.5",children:["Pro feature â€”"," ",e.jsx("button",{onClick:z,className:"text-zinc-500 hover:text-zinc-300 underline underline-offset-2 transition-colors",children:"upgrade to unlock"})]})]}),e.jsxs("label",{className:`relative inline-flex items-center ${A?"cursor-pointer":"cursor-not-allowed opacity-40"}`,children:[e.jsx("input",{type:"checkbox",checked:r,onChange:I=>A&&f(I.target.checked),disabled:!A,className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-500"})]})]})]}),s&&e.jsxs("section",{className:"space-y-3",children:[e.jsx("h3",{className:"text-xs font-medium text-zinc-500 uppercase tracking-wider mb-4",children:k.memory.capacity.title}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-1 h-2 bg-zinc-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-orange-500 transition-all duration-300",style:{width:`${s.count/s.max*100}%`}})}),e.jsxs("span",{className:"text-sm text-zinc-400 tabular-nums",children:[s.count," / ",s.max]})]}),n&&e.jsx("p",{className:"text-xs text-amber-500",children:k.memory.capacity.reached})]}),e.jsxs("section",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xs font-medium text-zinc-500 uppercase tracking-wider",children:k.memory.list.title}),!d&&!n&&e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>y(!0),className:"text-xs text-zinc-400 border-zinc-700 hover:text-zinc-200 h-7",children:[e.jsx(Ot,{className:"w-3 h-3 mr-1"})," ",k.memory.list.add_button]})]}),d&&e.jsxs("div",{className:"p-4 bg-zinc-900/30 rounded-lg border border-zinc-800 space-y-3 mb-4",children:[e.jsx(ee,{value:m,onChange:I=>N(I.target.value),placeholder:k.memory.list.placeholder,className:"w-full min-h-[60px] text-sm bg-zinc-800/50 border-zinc-700",maxLength:200}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-zinc-500",children:[m.length,"/200"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>{y(!1),N("")},className:"text-xs",children:k.memory.list.cancel}),e.jsx(E,{variant:"default",size:"sm",onClick:w,disabled:!m.trim()||x,className:"text-xs",children:x?"Saving...":k.memory.list.save})]})]}),p&&e.jsx("p",{className:"text-xs text-red-400",children:p})]}),t.length===0&&!d?e.jsxs("div",{className:"text-center py-12 px-4 bg-zinc-900/10 rounded-lg border border-zinc-800/50",children:[e.jsx(Ee,{className:"w-12 h-12 text-zinc-600 mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-zinc-400 mb-1",children:k.memory.list.empty.title}),e.jsx("p",{className:"text-xs text-zinc-600",children:k.memory.list.empty.description})]}):e.jsx("div",{className:"space-y-1",children:t.map((I,C)=>e.jsx("div",{className:"flex flex-col py-3 hover:bg-zinc-900/20 -mx-3 px-3 rounded-md transition-colors",children:l===I.id?e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{value:c,onChange:P=>j(P.target.value),className:"w-full min-h-[60px] text-sm",maxLength:200}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-zinc-500",children:[c.length,"/200"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>u(null),className:"text-xs",children:k.memory.list.cancel}),e.jsx(E,{variant:"default",size:"sm",onClick:()=>h(I.id),className:"text-xs",children:k.memory.list.save})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("span",{className:"text-xs text-zinc-600 mt-0.5 w-4 text-right shrink-0",children:[C+1,"."]}),e.jsx("p",{className:"text-sm text-zinc-300 leading-relaxed flex-1",children:I.content})]}),e.jsxs("div",{className:"flex justify-between items-center mt-2 ml-7",children:[e.jsxs("span",{className:"text-[10px] text-zinc-600",children:[I.source==="auto"?k.memory.list.auto:k.memory.list.manual," Â· ",new Date(I.created_at).toLocaleDateString()]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>{u(I.id),j(I.content)},className:"h-7 px-2 text-xs text-zinc-500 hover:text-zinc-300",children:e.jsx($t,{className:"w-3 h-3"})}),e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>g(I.id),className:"h-7 px-2 text-xs text-zinc-500 hover:text-red-400",children:e.jsx(Wt,{className:"w-3 h-3"})})]})]})]})},I.id))})]})]})}const Ws={pro:{usd:{month:"price_1T2qy2CZmA6ItMhqLwNE04e4",year:"price_1T2qy2CZmA6ItMhqC4wjt5G1"},jpy:{month:"price_1T2qy3CZmA6ItMhqwuzBUMqg",year:"price_1T2qy4CZmA6ItMhqyda8SbLf"}},power:{usd:{month:"price_1T2qy5CZmA6ItMhqzJrkPbdd",year:"price_1T2qy5CZmA6ItMhqpvUL8RBZ"},jpy:{month:"price_1T2qy6CZmA6ItMhqYLHrfJpi",year:"price_1T2qy6CZmA6ItMhqd6FTw8Bp"}}},de={free:0,pro:1,power:2};function Ks({profile:t}){const s=D(),{t:n,language:r}=U(),o=r==="ja"?"jpy":"usd",[a,l]=i.useState(()=>t?.subscription_tier??"free"),[c,d]=i.useState("year"),[m,x]=i.useState(!1),[p,f]=i.useState(""),[u,j]=i.useState(!1),[h,g]=i.useState(""),[y,N]=i.useState(null),[w,z]=i.useState(!1),[k,A]=i.useState(!1),I=i.useCallback(()=>{z(!0),s.usage.getStats().then(S=>{S.success&&S.stats&&N(S.stats)}).catch(()=>{}).finally(()=>z(!1))},[s]);i.useEffect(()=>{I()},[I]),i.useEffect(()=>(window.addEventListener("focus",I),()=>window.removeEventListener("focus",I)),[I]);const C=y?.subscription_tier??t?.subscription_tier??"free",P=C!=="free",F=y?.cancel_at_period_end??t?.cancel_at_period_end??!1,_=y?.current_period_end??t?.current_period_end,M=_?new Date(_).toLocaleDateString():null,b=y?.subscription_interval??t?.subscription_interval,v=y?.generations_used??t?.generations_used??0,L=y?.generations_limit??t?.generations_limit??100,T=Math.min(100,v/L*100);i.useEffect(()=>{y&&!k&&(A(!0),l(C))},[y,k,C]);const q=i.useCallback(async()=>{if(a!=="free"){f(""),x(!0);try{const S=Ws[a][o][c],G=await s.billing.createCheckout(S);G.success||f(G.error||"Failed to open checkout")}catch{f("Failed to open checkout")}finally{x(!1)}}},[s,a,o,c]),ge=i.useCallback(async()=>{g(""),j(!0);try{const S=await s.billing.createPortal();S.success||g(S.error||"Failed to open portal")}catch{g("Failed to open portal")}finally{j(!1)}},[s]),ne=a===C,V=de[a]>de[C],W=de[a]<de[C],ie=ne?null:V?n.billing.actions.upgrade_to.replace("{plan}",n.billing.plans[a]):W&&a==="free"?n.billing.actions.cancel_subscription:W?n.billing.actions.switch_to.replace("{plan}",n.billing.plans[a]):null,re=W&&a==="free"&&M?n.billing.notices.access_until.replace("{date}",M):W&&a!=="free"?n.billing.notices.take_effect_at_period_end:null,be=V?q:ge,ae=V?m:u,oe=(()=>{if(F)return null;const S=b==="month"?n.billing.interval.billed_monthly:b==="year"?n.billing.interval.billed_annually:null;return S&&M?`${S} Â· ${n.billing.notices.renews.replace("{date}",M)}`:S||(C==="free"?n.billing.plans.features.free[0]:null)})();return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("h3",{className:"text-xs font-medium text-zinc-500 uppercase tracking-wider",children:n.billing.current_plan.title}),w&&e.jsx("span",{className:"text-[10px] text-zinc-600 animate-pulse",children:n.billing.notices.checking})]}),e.jsxs("div",{className:"bg-zinc-900/20 rounded-lg p-5 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-base font-semibold text-zinc-100 capitalize mb-0.5",children:n.billing.plans[C]}),oe&&e.jsx("p",{className:"text-xs text-zinc-500",children:oe})]}),e.jsx("span",{className:"text-xs px-2 py-0.5 bg-zinc-800 text-zinc-400 rounded-md",children:n.billing.notices.current})]}),P&&F&&e.jsx("p",{className:"text-xs text-amber-400",children:M?`âš  ${n.billing.notices.subscription_ending_on.replace("{date}",M)}`:n.billing.notices.subscription_cancelled}),e.jsx("div",{className:"pt-1 space-y-1",children:n.billing.plans.features[C]?.map(S=>e.jsxs("div",{className:"flex items-center gap-2 text-xs text-zinc-400",children:[e.jsx(me,{className:"w-3 h-3 text-zinc-500 shrink-0"}),e.jsx("span",{children:S})]},S))})]})]}),e.jsxs("section",{className:"space-y-3",children:[e.jsx("h3",{className:"text-xs font-medium text-zinc-500 uppercase tracking-wider mb-4",children:n.billing.usage.title}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2 text-zinc-400",children:[e.jsx("span",{children:n.billing.usage.generations}),e.jsxs("span",{className:"text-zinc-500",children:[v.toLocaleString()," / ",L.toLocaleString()]})]}),e.jsx("div",{className:"h-1.5 w-full bg-zinc-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-zinc-100 rounded-full transition-all duration-500",style:{width:`${T}%`}})}),e.jsx("p",{className:"mt-1.5 text-xs text-zinc-600",children:C==="free"?n.billing.notices.resets_on_1st:M?n.billing.notices.resets_on_date.replace("{date}",M):n.billing.usage.tokens.reset})]})]}),e.jsxs("section",{className:"pt-6 border-t border-zinc-800/50",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"flex gap-1 bg-zinc-900/40 rounded-full p-1 border border-zinc-800/50",children:["month","year"].map(S=>e.jsx("button",{onClick:()=>d(S),className:`text-xs font-medium px-4 py-1.5 rounded-full transition-all duration-300 ${c===S?"bg-zinc-700 text-zinc-100 shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,children:S==="month"?n.billing.interval.monthly:n.billing.interval.annual},S))})}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["free","pro","power"].map(S=>{const G=a===S,ce=C===S,J=ce&&F,ze=n.billing.plans.features[S];let K="",Q=null;if(S==="free")K=o==="usd"?"$0":"Â¥0";else{const $=c==="month";S==="pro"?o==="usd"?(K=$?"$9/mo":"$7/mo",$||(Q=n.billing.interval.billed_annually_total.replace("{price}","$84"))):(K=$?"Â¥980/mo":"Â¥800/mo",$||(Q=n.billing.interval.billed_annually_total.replace("{price}","Â¥9,600"))):S==="power"&&(o==="usd"?(K=$?"$19/mo":"$15/mo",$||(Q=n.billing.interval.billed_annually_total.replace("{price}","$180"))):(K=$?"Â¥2,480/mo":"Â¥2,000/mo",$||(Q=n.billing.interval.billed_annually_total.replace("{price}","Â¥24,000"))))}return e.jsxs("button",{onClick:()=>l(S),className:`text-left p-3 rounded-lg border transition-colors ${G?"border-zinc-400 bg-zinc-900/30":"border-zinc-800 bg-zinc-900/10 hover:border-zinc-700"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-1.5",children:[e.jsx("span",{className:"text-sm font-medium text-zinc-200",children:n.billing.plans[S]}),ce&&e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded leading-tight ${J?"bg-amber-900/40 text-amber-400":"bg-zinc-800 text-zinc-400"}`,children:J?n.billing.notices.cancelling:n.billing.notices.current})]}),e.jsx("p",{className:"text-sm font-semibold text-zinc-100 mb-0.5",children:K}),e.jsx("p",{className:"text-[10px] text-zinc-500 mb-1.5 h-3",children:Q}),ze.length>0&&e.jsx("div",{className:"space-y-0.5 pt-1",children:ze.map($=>e.jsxs("div",{className:"flex items-center gap-1 text-[11px] text-zinc-500",children:[e.jsx(me,{className:"w-2.5 h-2.5 shrink-0"}),e.jsx("span",{children:$})]},$))})]},S)})}),!ne&&ie&&e.jsxs("div",{className:"space-y-1.5 mt-4",children:[(p||h)&&e.jsx("p",{className:"text-xs text-red-400",children:p||h}),e.jsx(E,{variant:V?"default":"outline",className:"w-full text-sm",onClick:be,disabled:ae,children:ae?V?n.billing.actions.opening_checkout:n.billing.actions.opening_portal:ie}),re&&e.jsx("p",{className:"text-xs text-zinc-500 text-center",children:re})]})]})]})}function Hs(){const{t}=U();return e.jsx("div",{className:"space-y-8 animate-fade-in",children:e.jsxs("section",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xs font-medium text-zinc-500 uppercase tracking-wider mb-4",children:t.shortcuts.title}),e.jsx(Pe,{platform:typeof navigator<"u"?navigator.platform:""}),e.jsx("div",{className:"pt-4 border-t border-zinc-800/50",children:e.jsx("p",{className:"text-sm text-zinc-500",children:t.shortcuts.description})})]})})}function Zs(){const{t}=U(),[s,n]=i.useState("general"),[r,o]=i.useState(()=>localStorage.getItem("sidebar-collapsed")==="true"),{profile:a,userEmail:l,isLoading:c,isEditingName:d,setIsEditingName:m,editedName:x,setEditedName:p,selectedStyle:f,customStyleInput:u,setCustomStyleInput:j,selectedModel:h,thinkingEnabled:g,language:y,handleSaveName:N,handleStyleSelect:w,handleSaveCustomStyle:z,handleScreenshotToggle:k,handleModelSelect:A,handleThinkingToggle:I,handleLanguageSelect:C,handleLogout:P}=Ds(),{facts:F,stats:_,isAtCapacity:M,memoryEnabled:b,editingMemoryId:v,setEditingMemoryId:L,editingMemoryContent:T,setEditingMemoryContent:q,isAddingMemory:ge,setIsAddingMemory:ne,newMemoryContent:V,setNewMemoryContent:W,isAddingLoading:ie,addMemoryError:re,handleMemoryToggle:be,handleMemoryEdit:ae,handleMemoryDelete:oe,handleMemoryAdd:S}=Us(s,a?.memory_enabled);i.useEffect(()=>{if(window.promptOS?.onNavigateToBilling)return window.promptOS.onNavigateToBilling(()=>{n("billing")})},[]);const G=i.useCallback(()=>{o(ce=>{const J=!ce;return localStorage.setItem("sidebar-collapsed",String(J)),J})},[]);return c?e.jsx("div",{className:"flex h-screen items-center justify-center bg-claude-bg text-zinc-200",children:e.jsx("div",{children:"Loading..."})}):e.jsxs(Os,{value:s,onValueChange:n,className:"page active flex h-screen bg-claude-bg text-zinc-200 overflow-hidden w-full",children:[e.jsx("div",{className:"title-bar h-8 w-full fixed top-0 left-0 z-50"}),r&&e.jsx(E,{variant:"ghost",size:"icon",onClick:G,className:"fixed top-10 left-4 z-50 p-2 rounded-lg bg-claude-sidebar border border-zinc-800/50",children:e.jsx(It,{className:"w-5 h-5"})}),e.jsxs("aside",{className:`flex flex-col bg-claude-sidebar border-r border-zinc-800/50 pt-10 pb-4 h-full transition-all duration-300 ease-in-out ${r?"w-0 opacity-0 overflow-hidden":"w-[260px] opacity-100"}`,children:[e.jsxs("div",{className:"px-5 mb-8 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1 overflow-hidden",children:[e.jsx("img",{src:"white_logo.png",alt:"Logo",className:"w-7 h-7 object-contain shrink-0"}),e.jsx("span",{className:"text-xl font-semibold tracking-tight text-zinc-100",children:"PromptOS"})]}),e.jsx(E,{variant:"ghost",size:"sm",onClick:G,className:"text-zinc-500 hover:text-zinc-300 h-auto p-1",children:e.jsx(Ft,{className:"w-4 h-4"})})]}),e.jsxs(at,{className:"flex-1 px-3",children:[e.jsxs(H,{value:"general",children:[e.jsx(Bt,{className:"w-4 h-4 shrink-0"}),e.jsx("span",{className:"whitespace-nowrap",children:t.settings.sidebar.general})]}),e.jsxs(H,{value:"account",children:[e.jsx(Ht,{className:"w-4 h-4 shrink-0"}),e.jsx("span",{className:"whitespace-nowrap",children:t.settings.sidebar.account})]}),e.jsxs(H,{value:"memory",children:[e.jsx(Ee,{className:"w-4 h-4 shrink-0"}),e.jsx("span",{className:"whitespace-nowrap",children:t.settings.sidebar.memory})]}),e.jsxs(H,{value:"billing",children:[e.jsx(jt,{className:"w-4 h-4 shrink-0"}),e.jsx("span",{className:"whitespace-nowrap",children:t.settings.sidebar.billing})]}),e.jsxs(H,{value:"shortcuts",children:[e.jsx(kt,{className:"w-4 h-4 shrink-0"}),e.jsx("span",{className:"whitespace-nowrap",children:t.settings.sidebar.shortcuts})]})]}),e.jsx("div",{className:"px-3 mt-auto",children:e.jsxs("div",{className:"p-3 rounded-lg bg-zinc-900/30 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-zinc-800 flex items-center justify-center text-xs font-medium text-zinc-300 shrink-0",children:a?.display_name?.charAt(0).toUpperCase()||"U"}),e.jsxs("div",{className:"overflow-hidden",children:[e.jsx("p",{className:"text-sm font-medium truncate text-zinc-200",children:a?.display_name||"User Name"}),e.jsx("p",{className:"text-[10px] text-zinc-500 truncate uppercase tracking-wider",children:a?.subscription_tier==="pro"?"Pro Plan":a?.subscription_tier==="power"?"Power Plan":"Free Plan"})]})]}),e.jsxs(E,{variant:"ghost",size:"sm",onClick:P,className:"w-full h-8 flex items-center gap-2 px-2 text-xs text-zinc-500 hover:text-zinc-300 justify-start",children:[e.jsx(St,{className:"w-3.5 h-3.5"}),t.settings.sidebar.sign_out]})]})})]}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-claude-bg h-full",children:e.jsxs("div",{className:"max-w-3xl mx-auto px-12 py-16 animate-fade-in",children:[e.jsxs("div",{className:"mb-10",children:[e.jsx("h1",{className:"text-2xl font-semibold mb-1 text-zinc-100 capitalize",children:t.settings.tabs[s]?.title}),e.jsx("p",{className:"text-zinc-500 text-sm",children:t.settings.tabs[s]?.description})]}),e.jsx(Z,{value:"general",children:e.jsx(Vs,{selectedStyle:f,customStyleInput:u,screenshotEnabled:a?.screenshot_enabled!==!1,selectedModel:h,thinkingEnabled:g,language:y,onStyleSelect:w,onCustomStyleChange:j,onSaveCustomStyle:z,onScreenshotToggle:k,onModelSelect:A,onThinkingToggle:I,onLanguageSelect:C})}),e.jsx(Z,{value:"account",children:e.jsx(Gs,{userEmail:l,displayName:a?.display_name,isEditingName:d,editedName:x,onEditName:()=>m(!0),onSaveName:N,onEditedNameChange:p})}),e.jsx(Z,{value:"memory",children:e.jsx(qs,{facts:F,stats:_,isAtCapacity:M,memoryEnabled:b,subscriptionTier:a?.subscription_tier??"free",subscriptionStatus:a?.subscription_status??"free",editingMemoryId:v,editingMemoryContent:T,isAddingMemory:ge,newMemoryContent:V,isAddingLoading:ie,addMemoryError:re,onMemoryToggle:be,onSetEditingMemoryId:L,onSetEditingMemoryContent:q,onMemoryEdit:ae,onMemoryDelete:oe,onSetIsAddingMemory:ne,onSetNewMemoryContent:W,onMemoryAdd:S,onNavigateToBilling:()=>n("billing")})}),e.jsx(Z,{value:"billing",children:e.jsx(Ks,{profile:a})}),e.jsx(Z,{value:"shortcuts",children:e.jsx(Hs,{})})]})})]})}function Ys(){const t=D(),[s,n]=i.useState({kind:"idle"}),[r,o]=i.useState(!1),a=i.useRef(null),l=i.useCallback(f=>{a.current=f.version,n({kind:"downloading",info:f}),o(!1)},[]),c=i.useCallback(f=>{const j={version:f.version??a.current??""};n(h=>{const g=h.kind!=="idle"&&h.kind!=="error"?h.info:j;return f.percent>=100?{kind:"preparing",info:g}:{kind:"progress",info:g,percent:Math.floor(f.percent)}})},[]),d=i.useCallback(f=>{a.current=f.version,n({kind:"ready",info:f}),o(!1)},[]),m=i.useCallback(f=>{n({kind:"error",message:f.message}),o(!1)},[]);i.useEffect(()=>{const f=t.update.onAvailable(l),u=t.update.onProgress(c),j=t.update.onReady(d),h=t.update.onError(m);return()=>{f(),u(),j(),h()}},[t,l,c,d,m]);const x=i.useCallback(()=>{t.update.install()},[t]),p=i.useCallback(()=>{o(!0)},[]);return s.kind==="idle"||r?null:e.jsx("div",{className:"fixed bottom-5 right-5 z-50 w-72 animate-slide-up",role:"status","aria-live":"polite",children:e.jsxs("div",{className:"bg-claude-sidebar border border-zinc-800/50 rounded-xl p-4 shadow-xl shadow-black/40",children:[s.kind==="downloading"&&e.jsx(Se,{version:s.info.version,percent:null,onDismiss:p}),s.kind==="progress"&&e.jsx(Se,{version:s.info.version,percent:s.percent,onDismiss:p}),s.kind==="preparing"&&e.jsx(Qs,{version:s.info.version,onDismiss:p}),s.kind==="ready"&&e.jsx(Xs,{version:s.info.version,onInstall:x,onDismiss:p}),s.kind==="error"&&e.jsx(en,{message:s.message,onDismiss:p})]})})}function he({label:t}){return e.jsx("p",{className:"text-[10px] font-medium uppercase tracking-wider text-zinc-500 mb-2",children:t})}function Js({percent:t}){return e.jsx("div",{className:"mt-3 h-[2px] w-full rounded-full bg-zinc-800 overflow-hidden",children:e.jsx("div",{className:"h-full bg-zinc-400 rounded-full transition-all duration-300",style:{width:`${t}%`}})})}function Se({version:t,percent:s,onDismiss:n}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx(he,{label:"Update available"}),e.jsxs("p",{className:"text-sm font-medium text-zinc-200",children:["v",t]}),e.jsx("p",{className:"text-xs text-zinc-500 mt-0.5",children:s!==null?`Downloadingâ€¦ ${s}%`:"Starting downloadâ€¦"})]}),e.jsx(fe,{onClick:n})]}),s!==null&&e.jsx(Js,{percent:s})]})}function Qs({version:t,onDismiss:s}){return e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx(he,{label:"Update available"}),e.jsxs("p",{className:"text-sm font-medium text-zinc-200",children:["v",t]}),e.jsx("p",{className:"text-xs text-zinc-500 mt-0.5",children:"Preparing updateâ€¦"})]}),e.jsx(fe,{onClick:s})]})}function Xs({version:t,onInstall:s,onDismiss:n}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx(he,{label:"Update ready"}),e.jsxs("p",{className:"text-sm font-medium text-zinc-200",children:["v",t," is ready to install"]}),e.jsx("p",{className:"text-xs text-zinc-500 mt-0.5",children:"The app will restart to apply the update."})]}),e.jsx(fe,{onClick:n})]}),e.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[e.jsx("button",{onClick:s,className:"flex-1 h-8 rounded-lg bg-orange-500 hover:bg-orange-600 text-xs font-medium text-white transition-colors duration-150",children:"Restart & Update"}),e.jsx("button",{onClick:n,className:"h-8 px-3 rounded-lg text-xs font-medium text-zinc-500 hover:text-zinc-300 hover:bg-zinc-800/50 transition-colors duration-150",children:"Later"})]})]})}function en({message:t,onDismiss:s}){return e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx(he,{label:"Update failed"}),e.jsx("p",{className:"text-xs text-zinc-500 mt-0.5 truncate",title:t,children:t})]}),e.jsx(fe,{onClick:s})]})}function fe({onClick:t}){return e.jsx("button",{onClick:t,"aria-label":"Dismiss",className:"shrink-0 w-5 h-5 flex items-center justify-center rounded-md text-zinc-600 hover:text-zinc-400 hover:bg-zinc-800/50 transition-colors duration-150",children:e.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none","aria-hidden":"true",children:e.jsx("path",{d:"M1 1l8 8M9 1L1 9",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})})})}let ye=!1;function tn(){const t=D(),[s,n]=i.useState("auth");i.useEffect(()=>t.onNavigate(a=>{n(a)}),[t]),i.useEffect(()=>{ye||(async()=>{try{const o=await t.auth.getSession();if(o.success&&o.session){const a=await t.profile.get();a.success&&a.profile?.onboarding_completed?n("settings"):a.success&&n("onboarding-language")}ye=!0}catch{ye=!0}})()},[t]);const r=i.useCallback(o=>{n(o)},[]);return e.jsxs(e.Fragment,{children:[s==="auth"&&e.jsx(dt,{onNavigate:r}),s==="onboarding-language"&&e.jsx(Jt,{onNavigate:r}),s==="onboarding-1"&&e.jsx(ut,{onNavigate:r}),s==="onboarding-2"&&e.jsx(Qt,{onNavigate:r}),s==="onboarding-3"&&e.jsx(Xt,{onNavigate:r}),s==="settings"&&e.jsx(Zs,{}),e.jsx(Ys,{})]})}ct.createRoot(document.getElementById("root")).render(e.jsx(B.StrictMode,{children:e.jsx(lt,{children:e.jsx(tn,{})})}));
