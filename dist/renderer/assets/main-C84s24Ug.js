import{u as k,r as e,j as t,B as w,R as L,a as O,P as G}from"./styles-D3TrOL3Q.js";function I(r,l){const i=k(),o=e.useRef(r),d=e.useRef(l);e.useEffect(()=>{o.current=r},[r]),e.useEffect(()=>{d.current=l},[l]),e.useEffect(()=>{const p=()=>o.current?.(),c=()=>d.current?.(),x=r?i.onWindowShown(p):void 0,f=l?i.onWindowHidden(c):void 0;return()=>{x?.(),f?.()}},[i])}const W=t.jsxs("svg",{className:"w-[18px] h-[18px]",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("path",{d:"M22 2L11 13"}),t.jsx("path",{d:"M22 2L15 22L11 13L2 9L22 2Z"})]});function B(){const r=k(),[l,i]=e.useState(""),[o,d]=e.useState(""),[p,c]=e.useState(""),[x,f]=e.useState(!1),u=e.useRef(null),b=e.useRef(!1),[h,m]=e.useState(""),y=!!o,v=!!p,n=e.useCallback(()=>{i(""),d(""),c(""),m("")},[]),R=e.useCallback(()=>{n(),u.current?.focus()},[n]),S=e.useCallback(()=>{n()},[n]);I(R,S),e.useEffect(()=>{if(window.promptOS&&window.promptOS.onGenerationStatus)return window.promptOS.onGenerationStatus(s=>{m(s)})},[r]);const g=e.useCallback(async()=>{const s=u.current?.value.trim()||"";if(!(!s||b.current))try{b.current=!0,f(!0),c(""),m("");const a=await r.generate(s);a.success&&a.text?d(a.text):c(a.error||"Failed to generate text")}catch{c("An unexpected error occurred")}finally{b.current=!1,f(!1),m("")}},[r]),E=e.useCallback(async()=>{const s=o;if(s)try{await r.insert(s),n()}catch{c("Failed to insert text")}},[r,o,n]),C=e.useCallback(()=>{u.current?.focus(),u.current?.select()},[]),j=e.useCallback(()=>{r.dismiss(),n()},[r,n]),N=e.useCallback(s=>{s.isComposing||s.repeat||(s.key==="Enter"&&!s.shiftKey?(s.preventDefault(),g()):s.key==="Escape"&&j())},[g,j]);return e.useEffect(()=>{const s=a=>{a.key==="Escape"&&(r.dismiss(),n())};return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[r,n]),t.jsxs("div",{className:"bg-transparent h-screen flex flex-col justify-end items-center p-3 pb-6 font-[-apple-system,BlinkMacSystemFont,'Segoe_UI',Roboto,Oxygen,Ubuntu,sans-serif]",children:[y&&t.jsxs("div",{className:"mb-3 bg-[#252525] bg-gradient-to-b from-white/[0.04] to-transparent border border-white/[0.08] backdrop-blur-xl rounded-[20px] p-5 shadow-lg animate-slide-up origin-bottom w-full max-h-[calc(100vh-100px)] overflow-y-auto",children:[t.jsx("div",{className:"result-text text-[15px] leading-relaxed text-gray-200 max-h-[350px] overflow-y-auto whitespace-pre-wrap pr-1",children:o}),t.jsxs("div",{className:"flex gap-2 mt-2 justify-end",children:[t.jsx(w,{variant:"ghost",size:"sm",onClick:C,className:"text-[13px] text-gray-400 px-2.5 py-1.5 rounded-xl hover:text-gray-200 active:scale-95",children:"Refine"}),t.jsx(w,{variant:"ghost",size:"sm",onClick:E,className:"bg-[#FF6B00] hover:bg-[#ff8533] text-white rounded-xl px-3.5 py-1.5 text-[13px] font-medium active:scale-95",children:"Insert"})]})]}),v&&t.jsx("div",{className:"mb-3 p-3 px-4 bg-red-50 rounded-2xl border border-red-300 shadow-[0_4px_12px_rgba(220,38,38,0.1)] text-red-700 text-sm animate-slide-up w-full",children:t.jsx("span",{children:p})}),h&&!y&&!v&&t.jsx("div",{className:"mb-3 p-2 px-4 bg-blue-500/10 rounded-2xl border border-blue-500/20 text-blue-200 text-xs animate-pulse w-fit mx-auto backdrop-blur-md",children:t.jsx("span",{children:h})}),t.jsxs("div",{className:"input-bar flex items-center gap-3.5 bg-[#252525] bg-gradient-to-b from-white/[0.04] to-transparent border border-white/[0.08] backdrop-blur-xl rounded-[28px] py-2.5 px-5 shadow-lg w-[92%]",children:[t.jsx("img",{src:"logo.png",className:"w-6 h-6 object-contain flex-shrink-0 opacity-80",alt:"Logo"}),t.jsx("input",{ref:u,type:"text",value:l,onChange:s=>i(s.target.value),onKeyDown:N,placeholder:h||"Ask AI...",autoComplete:"off",spellCheck:!1,className:"flex-1 bg-transparent border-none text-base text-gray-100 outline-none font-normal placeholder:text-gray-500"}),t.jsx(w,{variant:"ghost",size:"icon",onClick:g,disabled:x||!!h,className:"w-8 h-8 rounded-full text-gray-500 hover:bg-black/5 hover:text-gray-900 disabled:opacity-50",children:x?t.jsx("span",{className:"spinner"}):W})]})]})}L.createRoot(document.getElementById("root")).render(t.jsx(O.StrictMode,{children:t.jsx(G,{children:t.jsx(B,{})})}));
