import"./styles-Dt_C4Pzm.js";const t=document.getElementById("prompt-input"),o=document.getElementById("generate-btn"),a=o.querySelector(".icon-send"),u=o.querySelector(".btn-loading"),i=document.getElementById("result-section"),E=document.getElementById("result-text"),w=document.getElementById("refine-btn"),g=document.getElementById("insert-btn"),f=document.getElementById("error-section"),h=document.getElementById("error-text"),L=document.getElementById("cancel-btn");document.querySelector(".input-bar");let s="",p=!1;function m(e){p=e,o.disabled=e,e?(a.style.display="none",u.classList.remove("hidden")):(a.style.display="block",u.classList.add("hidden"))}function r(e){h.textContent=e,f.classList.remove("hidden"),i.classList.add("hidden")}function c(){f.classList.add("hidden")}function B(e){s=e,E.textContent=e,i.classList.remove("hidden"),c()}function v(){i.classList.add("hidden"),s=""}async function y(){const e=t.value.trim();if(!(!e||p)){m(!0),c();try{const n=await window.promptOS.generate(e);n.success?B(n.text):r(n.error||"Failed to generate text")}catch(n){r(n.message||"An unexpected error occurred")}finally{m(!1)}}}async function S(){if(s)try{await window.promptOS.insert(s),d()}catch{r("Failed to insert text")}}function k(){t.focus(),t.select()}function d(){t.value="",v(),c()}function l(){window.promptOS.dismiss(),d()}o.addEventListener("click",y);t.addEventListener("keydown",e=>{e.isComposing||(e.key==="Enter"&&!e.shiftKey?(e.preventDefault(),y()):e.key==="Escape"&&l())});w.addEventListener("click",k);g.addEventListener("click",S);L.addEventListener("click",l);document.addEventListener("keydown",e=>{e.key==="Escape"&&l()});window.promptOS.onWindowShown(()=>{t.focus()});window.promptOS.onWindowHidden(()=>{d()});
