{
  "version": 3,
  "sources": ["app.js"],
  "sourcesContent": ["// DOM elements\nconst promptInput = document.getElementById('prompt-input');\nconst generateBtn = document.getElementById('generate-btn');\nconst iconSend = generateBtn.querySelector('.icon-send');\nconst btnLoading = generateBtn.querySelector('.btn-loading');\nconst resultSection = document.getElementById('result-section');\nconst resultText = document.getElementById('result-text');\nconst refineBtn = document.getElementById('refine-btn');\nconst insertBtn = document.getElementById('insert-btn');\nconst errorSection = document.getElementById('error-section');\nconst errorText = document.getElementById('error-text');\nconst cancelBtn = document.getElementById('cancel-btn');\n\nlet currentResult = '';\nlet isGenerating = false;\n\n// Show/hide loading state\nfunction setLoading(loading) {\n    isGenerating = loading;\n    generateBtn.disabled = loading;\n    if (loading) {\n        iconSend.style.display = 'none';\n        btnLoading.classList.remove('hidden');\n    } else {\n        iconSend.style.display = 'block';\n        btnLoading.classList.add('hidden');\n    }\n}\n\n// Show error\nfunction showError(message) {\n    errorText.textContent = message;\n    errorSection.classList.remove('hidden');\n    resultSection.classList.add('hidden');\n}\n\n// Hide error\nfunction hideError() {\n    errorSection.classList.add('hidden');\n}\n\n// Show result\nfunction showResult(text) {\n    currentResult = text;\n    resultText.textContent = text;\n    resultSection.classList.remove('hidden');\n    hideError();\n}\n\n// Hide result\nfunction hideResult() {\n    resultSection.classList.add('hidden');\n    currentResult = '';\n}\n\n// Generate text\nasync function generate() {\n    const prompt = promptInput.value.trim();\n    if (!prompt || isGenerating) return;\n\n    setLoading(true);\n    hideError();\n\n    try {\n        const response = await window.promptOS.generate(prompt);\n        if (response.success) {\n            showResult(response.text);\n        } else {\n            showError(response.error || 'Failed to generate text');\n        }\n    } catch (error) {\n        showError(error.message || 'An unexpected error occurred');\n    } finally {\n        setLoading(false);\n    }\n}\n\n// Insert text\nasync function insert() {\n    if (!currentResult) return;\n\n    try {\n        await window.promptOS.insert(currentResult);\n        reset();\n    } catch (error) {\n        showError('Failed to insert text');\n    }\n}\n\n// Refine - focus back on input to edit prompt\nfunction refine() {\n    promptInput.focus();\n    promptInput.select();\n}\n\n// Reset state\nfunction reset() {\n    promptInput.value = '';\n    hideResult();\n    hideError();\n}\n\n// Dismiss overlay\nfunction dismiss() {\n    window.promptOS.dismiss();\n    reset();\n}\n\n// Event listeners\ngenerateBtn.addEventListener('click', generate);\n\npromptInput.addEventListener('keydown', (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n        e.preventDefault();\n        generate();\n    } else if (e.key === 'Escape') {\n        dismiss();\n    }\n});\n\nrefineBtn.addEventListener('click', refine);\ninsertBtn.addEventListener('click', insert);\ncancelBtn.addEventListener('click', dismiss);\n\n// Global escape key handler\ndocument.addEventListener('keydown', (e) => {\n    if (e.key === 'Escape') {\n        dismiss();\n    }\n});\n\n// When window is shown, focus the input\nwindow.promptOS.onWindowShown(() => {\n    promptInput.focus();\n});\n\n// When window is hidden, reset state\nwindow.promptOS.onWindowHidden(() => {\n    reset();\n});\n"],
  "mappings": "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",
  "names": []
}
